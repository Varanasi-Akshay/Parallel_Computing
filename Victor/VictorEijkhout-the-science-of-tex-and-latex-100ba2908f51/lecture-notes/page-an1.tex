In enforcing the same values for the $x_i$ and $u_j$ values, the proof
used that
\[ (d+1)^+(d-1)^2>2d^2. \]
The general requirement for the badness function is
\[ f(n+1)+f(n-1)>2f(n), \]
which is satisfied for polynomial badness functions that increase
faster than linear. The statement is that $f(n)$ is less than the
average of the surrounding values, so in fact any convex function
would work.
